# vim: ft=zsh
local pre post plugins

asdf plugin update --all

pre=$(asdf current 2>/dev/null)
plugins=("${(@f)$(asdf current 2>/dev/null | awk 'NR>1 {print $1}')}")

for p in $plugins; do
  asdf install "$p" latest || { echo "Failed to install $p"; continue }
  asdf set -u "$p" latest
  asdf reshim "$p"
done

post=$(asdf current 2>/dev/null)

diff <(echo "$pre") <(echo "$post") | bat -p --theme=gruvbox-dark

